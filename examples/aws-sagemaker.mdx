---
title: "AWS SageMaker Integration"
description: "Integrate Asymptote with AWS SageMaker for ML security scanning."
---

# AWS SageMaker Integration

Integrate Asymptote with AWS SageMaker to scan machine learning pipelines for security vulnerabilities.

## Overview

AWS SageMaker is a fully managed machine learning service. Integrating Asymptote helps ensure:

- Secure model training code
- Protected inference endpoints
- Compliant data handling
- Safe notebook environments

## Architecture

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   SageMaker     │────▶│    Asymptote    │────▶│   Dashboard     │
│   Pipeline      │     │    Scanner      │     │   & Alerts      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
         │                      │
         ▼                      ▼
┌─────────────────┐     ┌─────────────────┐
│   S3 Bucket     │     │   AWS Secrets   │
│   (artifacts)   │     │   Manager       │
└─────────────────┘     └─────────────────┘
```

## Setup

### Step 1: IAM Configuration

Create an IAM role for Asymptote:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "sagemaker:DescribeTrainingJob",
        "sagemaker:DescribeEndpoint",
        "s3:GetObject",
        "s3:ListBucket"
      ],
      "Resource": "*"
    }
  ]
}
```

### Step 2: Configure Asymptote

```yaml
# asymptote.yaml
integrations:
  aws:
    enabled: true
    region: us-east-1
    assume_role: arn:aws:iam::123456789:role/AsymptopeRole
    
sagemaker:
  scan_notebooks: true
  scan_training_scripts: true
  scan_inference_code: true
  s3_artifacts:
    - s3://my-bucket/sagemaker/
```

### Step 3: SageMaker Pipeline Integration

Add scanning to your SageMaker pipeline:

```python
import boto3
from sagemaker.workflow.steps import ProcessingStep
from sagemaker.processing import ScriptProcessor

# Create Asymptote scanning step
asymptote_processor = ScriptProcessor(
    role=role,
    image_uri="asymptote/scanner:latest",
    command=["asymptote"],
    instance_count=1,
    instance_type="ml.t3.medium"
)

scan_step = ProcessingStep(
    name="SecurityScan",
    processor=asymptote_processor,
    code="scan.py",
    inputs=[
        ProcessingInput(
            source=training_code_s3_uri,
            destination="/opt/ml/processing/input"
        )
    ],
    outputs=[
        ProcessingOutput(
            output_name="scan-results",
            source="/opt/ml/processing/output"
        )
    ]
)

# Add to pipeline
pipeline = Pipeline(
    name="MLSecurityPipeline",
    steps=[scan_step, training_step, evaluation_step]
)
```

## Scanning SageMaker Notebooks

### SageMaker Studio Integration

Install the Asymptote extension in SageMaker Studio:

```bash
pip install asymptote-sagemaker
asymptote sagemaker install
```

### Automatic Notebook Scanning

```yaml
# asymptote.yaml
sagemaker:
  studio:
    auto_scan: true
    scan_on_save: true
    block_on_critical: true
```

## Common Security Findings

### Insecure S3 Access

```python
# ❌ Bad: Hardcoded credentials
s3 = boto3.client(
    's3',
    aws_access_key_id='AKIAXXXXXXXX',
    aws_secret_access_key='secretkey'
)

# ✅ Good: Use IAM roles
s3 = boto3.client('s3')  # Uses instance role
```

### Model Artifacts Exposure

```python
# ❌ Bad: Public S3 bucket
s3.upload_file(
    'model.tar.gz',
    'public-bucket',
    'models/latest.tar.gz',
    ExtraArgs={'ACL': 'public-read'}
)

# ✅ Good: Private bucket with encryption
s3.upload_file(
    'model.tar.gz',
    'private-bucket',
    'models/latest.tar.gz',
    ExtraArgs={'ServerSideEncryption': 'aws:kms'}
)
```

### Inference Endpoint Security

```python
# ❌ Bad: No authentication
predictor = Predictor(
    endpoint_name='my-endpoint',
    # No authentication configured
)

# ✅ Good: IAM authentication
predictor = Predictor(
    endpoint_name='my-endpoint',
    sagemaker_session=session  # Uses IAM auth
)
```

## CI/CD Pipeline

Integrate with CodePipeline:

```yaml
# buildspec.yml
version: 0.2

phases:
  install:
    commands:
      - pip install asymptote-cli
      
  pre_build:
    commands:
      - asymptote scan ./src/ --format sarif --output scan-results.sarif
      
  build:
    commands:
      - python train.py
      
artifacts:
  files:
    - scan-results.sarif
    - model.tar.gz
```

## Best Practices

<CardGroup cols={2}>
  <Card title="Use IAM Roles" icon="user-shield">
    Never hardcode AWS credentials in notebooks or scripts.
  </Card>
  <Card title="Encrypt Artifacts" icon="lock">
    Enable encryption for all S3 buckets containing models and data.
  </Card>
  <Card title="VPC Endpoints" icon="network-wired">
    Use VPC endpoints for secure access to AWS services.
  </Card>
  <Card title="Audit Logging" icon="clipboard-list">
    Enable CloudTrail for all SageMaker API calls.
  </Card>
</CardGroup>

